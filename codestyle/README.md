# Соглашения о написании кода на C#

1. [Соглашения об именах](#1-Соглашения-об-именах)
2. [Отступы. Длина строки. Переносы строк](#2-Кодировка-Отступы-Длина-строки-Переносы-строк)
3. [Расположение блоков и операторов. Пробелы. Скобки](#3-Расположение-блоков-и-операторов-Пробелы-Скобки)
4. [Структурирование кода и комментарии](#4-Структурирование-кода-и-комментарии)
5. [Исключительные ситуации](#5-Исключительные-ситуации)

## 1. Соглашения об именах

- Имена классов и пространств имен должны быть существительными, первые буквы всех слов — заглавные.
- Имя файла содержащего публичный класс должно совпадать с именем этого класса (+ расширение `.cs`).
- В одном файле следует описывать только один класс или интерфейс (за исключением вложенных классов и интерфейсов).
- Названия методов должны быть глаголами, первая буква должна быть заглавной (например `CalcPrice()`, `SetYear(int year)`).
- Аргументы методов, локальные переменные и защищенные (`protected`) поля должны начинаться со строчной буквы. Первые буквы последующих слов - заглавные.

```cs
int someLocalVariable = 1;
```

## 2. Кодировка. Отступы. Длина строки. Переносы строк

- Используйте UTF-8, как кодировку для Ваших исходных файлов.
- Отступы должны составлять строго 4 пробельных символа;

```cs
using System;

class Program
{
    public static void Main(string[] args)
    {
        int value1 = 1;
        int value2 = 2;
        int result = value1 + value2;
        Console.WriteLine(result);
    }
}
```

- Символы табуляции не используются для отступов;
- Длина строки не должна превышать 119 символов (в редакторе кода серая линия справа обозначает эту границу).
- При превышении длины строки, выражение разбивается согласно следующим правилам:
  1.  перенос после запятой;
  2.  перенос перед оператором.

Пример:

```cs
int result = SomeLongExpression(this, expression, on, first, line)
    + SomeLongExpression(this, expression, on, seccond, line)
```

## 3. Расположение блоков и операторов. Пробелы. Скобки

- Между именем метода и скобками для списка параметров нет пробела.

```cs
GetSomeData(string key)
```

- Параметры разделяются пробелом.

```cs
GetSomeData(string key, object defValue)
```

- Пробелы окружают любой оператор.

```cs
res = GetPrice();
```

```cs
(a > 10) ? b : c;
```

- Ключевое слово и следующая за ним скобка `(` должны разделяться пробелом.

```cs
while (b < 100)
{
    // some actions
}
```

- Открывающая скобка `{` располагается на следующей строке после сигнатуры метода/заголовока `if`, `while`-блока и т.п.

- Закрывающая скобка `}` выровнена по уровню открывающей скобки `{` данного блока.

```cs
public int GetPrice()
{
    if (protectedValue > 10)
    {
        return protectedValue;
    }
    return 10;
}
```

- Методы разделяются пустой строкой, объявления полей и свойств класса располагаются по одному на строку.

## 4. Структурирование кода и комментарии

- Методы должны быть по возможности короткими, и выполнять только одну задачу соответствующую имени.
- Старайтесь писать комментарии и описание методов, свойств и классов (самодокументирование).

```cs
/// <summary>
/// The main Math class.
/// Contains all methods for performing basic math functions.
/// </summary>
public class Math
{
    /// <summary>
    /// Adds two integers and returns the result.
    /// </summary>
    public static int Add(int a, int b)
    {
        // If any parameter is equal to the max value of an integer
        // and the other is greater than zero
        if ((a == int.MaxValue && b > 0) || (b == int.MaxValue && a > 0))
            throw new System.OverflowException();

        return a + b;
    }
}
```

- Не нужно писать комментарии для тривиальных методов и свойств, типа примитивных геттеров и сеттеров.
- Используйте комментарии TODO для кода, который является временным, краткосрочным, или хорошим, но не идеальным. Комментарий должен включать в себя `TODO:`.

```cs
// TODO: Remove this code after the UrlTable2 has been checked in.

// TODO: Change this to use a flag instead of a constant.
```

## 5. Исключительные ситуации

- Старайтесь отлавливать как можно более конкретные типы исключений.

```cs
string GetValueFromArray(int index, string defValue)
{
    try
    {
        return array[index];
    }
    catch (System.IndexOutOfRangeException ex)
    {
        Console.WriteLine("Index is out of range: {0}", index);
        return defValue;
    }
}
```

- По возможности используйте оператор `using`, если блок `finally` занимается только освобождением ресурсов.

```cs
using (StreamReader sr = new StreamReader("some file.txt"))
{
    Console.WriteLine(sr.ReadLine());
}
```
